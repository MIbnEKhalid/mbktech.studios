<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Check and Update IP Address</title>
<script>window.onload = function() {
  // Function to get IP address
  function getIPAddress() {
    fetch('https://api.ipify.org?format=json')
      .then(response => response.json())
      .then(data => {
        const ipAddress = data.ip;
        document.getElementById('ip-address').textContent = ipAddress;
        const savedIPAddress = getCookie('ip_address');
        if (savedIPAddress) {
          if (savedIPAddress !== ipAddress) {
            // Update IP address in cookie
            document.cookie = `ip_address=${ipAddress}; expires=Sun, 1 Jan 2023 00:00:00 UTC; path=/`;
            console.log('Updated IP address in cookie:', ipAddress);
          }
        } else {
          // Save IP address in cookie
          document.cookie = `ip_address=${ipAddress}; expires=Sun, 1 Jan 2023 00:00:00 UTC; path=/`;
          console.log('Saved IP address in cookie:', ipAddress);
        }
      })
      .catch(error => console.error('Error fetching IP address:', error));
  }

  // Function to get cookie by name
  function getCookie(name) {
    const cookieValue = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
    return cookieValue ? cookieValue.pop() : null;
  }

  // Call the function to get IP address
  getIPAddress();
};
</script>
</head>
<body>
<h1>Check and Update IP Address</h1>
<p>Your IP address: <span id="ip-address"></span></p>
</body>
</html>
